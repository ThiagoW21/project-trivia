(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{31:function(e,t,n){e.exports=n.p+"static/media/trivia.466d153e.png"},33:function(e,t,n){e.exports=n(58)},41:function(e,t,n){},49:function(e,t){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(20),i=n.n(c),o=n(5),s=n(14),l=n(3),u=n(4),p=n(7),m=n(6),d=n(2),f=(n(41),n(13)),E=n.n(f),h=n(15),b=function(){var e=Object(h.a)(E.a.mark((function e(t){var n,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",n.ok?Promise.resolve(a):Promise.reject(a));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=n(18),v=n(27),g=n(28),O=n(8),k={name:"",assertions:0,score:0,gravatarEmail:"",picture:""},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOGIN_DATA":return Object(O.a)(Object(O.a)({},e),{},{name:t.name,gravatarEmail:t.email});case"UPDATE_ASSERTIONS":return Object(O.a)(Object(O.a)({},e),{},{assertions:e.assertions+1});case"UPDATE_SCORE":return Object(O.a)(Object(O.a)({},e),{},{score:e.score+t.score});case"SAVE_GRAVATAR":return Object(O.a)(Object(O.a)({},e),{},{picture:t.picture});case"RESET_STATE":return Object(O.a)(Object(O.a)({},e),{},{name:"",assertions:0,score:0,gravatarEmail:"",picture:""});default:return e}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_TOKEN":return e;case"RECEIVE_TOKEN_SUCCESS":return t.token;case"RECEIVE_TOKEN_FAILURE":return t.error;case"RENEW_TOKEN":return t.token;default:return e}},j={time:!1},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"EXPIRED_TIME":return Object(O.a)(Object(O.a)({},e),{},{time:!0});case"RESET_TIME":return Object(O.a)(Object(O.a)({},e),{},{time:!1});default:return e}},A={amount:5},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_CONFIG":return t.config;case"RESET_STATE":return{amount:5};default:return e}},w=Object(y.combineReducers)({player:C,token:S,time:T,config:N}),R=Object(y.createStore)(w,Object(v.composeWithDevTools)(Object(y.applyMiddleware)(g.a)));window.Cypress&&(window.store=R);var _=R,x=_.getState().token,I="https://opentdb.com/api.php?amount=5&token=".concat(x),U=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={players:[]},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("ranking")).sort((function(e,t){return t.score-e.score}));this.setState({players:e})}},{key:"render",value:function(){var e=this.state.players,t=_.dispatch;return r.a.createElement("div",null,r.a.createElement("div",{"data-testid":"ranking-title"},"Ranking"),e&&e.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("img",{src:e.picture,alt:"Gravatar do jogador"}),r.a.createElement("p",{"data-testid":"player-name-".concat(t)},e.name),r.a.createElement("p",{"data-testid":"player-score-".concat(t)},e.score))})),r.a.createElement(s.b,{to:"/"},r.a.createElement("button",{"data-testid":"btn-go-home",type:"button",onClick:function(){return t({type:"RESET_STATE"})}},"in\xedcio")))}}]),n}(a.Component),D=Object(o.b)((function(e){return{score:e.player.score,gravatarEmail:e.player.gravatarEmail,name:e.player.name}}))(U),M=n(32),q=n(30),V=n.n(q),G=(n(50),function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.email;(0,e.dispatchGravatar)("https://www.gravatar.com/avatar/".concat(V()(t).toString()))}},{key:"render",value:function(){var e=this.props,t=e.name,n=e.score,a=e.picture;return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"data-player-container"},r.a.createElement("img",{"data-testid":"header-profile-picture",src:a,alt:"Avatar do usu\xe1rio"}),r.a.createElement("p",null,"Jogador:"," ",r.a.createElement("span",{"data-testid":"header-player-name"},t))),r.a.createElement("p",{className:"score-container"},"Pontos:"," ",r.a.createElement("span",{"data-testid":"header-score"},n)))}}]),n}(a.Component)),F=Object(o.b)((function(e){return{email:e.player.gravatarEmail,name:e.player.name,score:e.player.score,picture:e.player.picture}}),(function(e){return{dispatchGravatar:function(t){return e(function(e){return{type:"SAVE_GRAVATAR",picture:e}}(t))}}}))(G),P=(n(51),function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.picture,n={name:e.name,picture:t,score:e.score},a=JSON.parse(localStorage.getItem("ranking"))||[],r=[].concat(Object(M.a)(a),[n]);localStorage.setItem("ranking",JSON.stringify(r))}},{key:"render",value:function(){var e=this.props,t=e.assertions,n=e.score,a=e.dispatchResetState;return r.a.createElement("div",{className:"feedback-page"},r.a.createElement(F,null),r.a.createElement("span",{className:"feedback-box"},r.a.createElement("p",{"data-testid":"feedback-text"},t<3?"Could be better...":"Well Done!"),r.a.createElement("p",null,"O seu placar final \xe9 de"," ",r.a.createElement("strong",{"data-testid":"feedback-total-score"},n)),r.a.createElement("p",null,"Voc\xea acertou"," ",r.a.createElement("strong",{"data-testid":"feedback-total-question"},t)," ","perguntas")),r.a.createElement(s.b,{to:"/"},r.a.createElement("button",{className:"btn-play-again","data-testid":"btn-play-again",type:"button",onClick:a},"Play Again")),r.a.createElement(s.b,{to:"/ranking"},r.a.createElement("button",{className:"btn-ranking","data-testid":"btn-ranking",type:"button"},"Ranking")))}}]),n}(a.Component)),L=Object(o.b)((function(e){return{assertions:e.player.assertions,score:e.player.score,name:e.player.name,picture:e.player.picture}}),(function(e){return{dispatchResetState:function(){return e({type:"RESET_STATE"})}}}))(P),K=(n(52),n(24)),Q=n.n(K),J=(n(54),function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.setNewTimer;this.timer=setInterval(e,1e3)}},{key:"render",value:function(){var e=this.props,t=e.dispatchTime,n=e.timer;return 0===n&&t(),r.a.createElement("p",{className:"timer"},n)}}]),n}(r.a.Component)),B=Object(o.b)(null,(function(e){return{dispatchTime:function(){return e({type:"EXPIRED_TIME"})}}}))(J),W=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).getTimer=function(e){return a.setState({responseTime:parseInt(e,10)})},a.handleClick=function(e){var t=e.target,n=a.props,r=n.dispatchUpdateScore,c=n.dispatchUpdateAssertions,i=a.state,o=i.responseTime,s=i.timer,l=t.parentNode.childNodes,u={hard:3,medium:2,easy:1,base:10},p=t.dataset.difficulty;l.forEach((function(e){"correct-answer"===e.dataset.testid?e.classList.add("correct-answer"):e.classList.add("incorrect-answer")})),"correct-answer"===t.dataset.testid&&(c(),r(u.base+o*u[p])),a.setState({clicked:!0}),a.getTimer(s)},a.renderAnswers=function(){var e=a.state,t=e.index,n=e.results[t],r=n.type,c=n.incorrect_answers.concat(),i=n.correct_answer,o="multiple"===r?4:2,s=c.concat();s.splice(Math.floor(Math.random()*o),0,i),a.setState({answers:s,correctAnswer:i}),console.log("renderAnswer",t)},a.nextAnswer=function(){var e=document.querySelectorAll(".answer");console.log(e),e.forEach((function(e){return e.classList.remove("correct-answer","incorrect-answer")}));var t=a.state,n=t.index,r=t.results,c=a.props.dispatchResetTime,i=a.props.history;n===r.length-1?i.push("/feedback"):(a.setState({index:n+1,timer:30,clicked:!1},(function(){return a.renderAnswers()})),c())},a.renderButtonNext=function(){return r.a.createElement("button",{className:"next-btn","data-testid":"btn-next",type:"button",onClick:a.nextAnswer},"Next")},a.setNewTimer=function(){var e=a.state.timer;if(0===e)a.setState({timer:0});else{var t=e-1;a.setState({timer:t})}},a.state={index:0,results:[],responseTime:0,answers:[],clicked:!1,timer:30},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=Object(h.a)(E.a.mark((function e(){var t,n,a,r,c,i,o,s,l;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.token,a=t.setNewToken,r=t.config,c="https://opentdb.com/api.php?token=".concat(n),Object.entries(r).filter((function(e){return""!==e[1]})).forEach((function(e){c+="&".concat(e[0],"=").concat(e[1])})),console.log(c),e.next=7,b(c);case 7:if(i=e.sent,3,3!==i.response_code){e.next=22;break}return"https://opentdb.com/api_token.php?command=request",e.next=13,b("https://opentdb.com/api_token.php?command=request");case 13:return o=e.sent,a(o),s="https://opentdb.com/api.php?amount=5&token=".concat(o.token),e.next=18,b(s);case 18:l=e.sent,this.setState({results:l.results}),e.next=23;break;case 22:this.setState({results:i.results});case 23:this.renderAnswers();case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.index,a=t.results,c=t.answers,i=t.correctAnswer,o=t.clicked,s=t.timer,l=this.props.time,u=a[n];return r.a.createElement(r.a.Fragment,null,r.a.createElement(F,null),0!==a.length&&r.a.createElement("div",{className:"game-container"},r.a.createElement("p",{"data-testid":"question-category",className:"question-category"},u.category),r.a.createElement("h3",{"data-testid":"question-text"},Q.a.decode(u.question)),r.a.createElement(B,{getTimer:this.getTimer,timer:s,setNewTimer:this.setNewTimer,clicked:o}),r.a.createElement("ul",{"data-testid":"answer-options"},c&&c.map((function(t,n){return r.a.createElement("button",{className:"answer","data-testid":t===i?"correct-answer":"wrong-answer-".concat(n),"data-difficulty":u.difficulty,type:"button",disabled:l,key:n,onClick:e.handleClick},Q.a.decode(t))})))),o||0===s?this.renderButtonNext():"")}}]),n}(a.Component),Z=Object(o.b)((function(e){return{token:e.token,time:e.time.time,config:e.config}}),(function(e){return{dispatchRequestQuiz:function(){return e(function(){var e=Object(h.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"REQUEST_QUIZ"}),e.prev=1,e.next=4,b(I);case 4:n=e.sent,t({type:"RECEIVE_QUIZ_SUCCESS",quiz:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:"RECEIVE_QUIZ_FAILURE",error:void 0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())},dispatchResetTime:function(){return e({type:"RESET_TIME"})},dispatchUpdateAssertions:function(){return e({type:"UPDATE_ASSERTIONS"})},dispatchUpdateScore:function(t){return e(function(e){return{type:"UPDATE_SCORE",score:e}}(t))},setNewToken:function(t){return e(function(e){return{type:"RENEW_TOKEN",token:e}}(t))}}}))(W),z=n(17),H=(n(55),n(31)),X=n.n(H),Y=["Any","General Knowledge","Entertainment: Books","Entertainment: Film","Entertainment: Music","Entertainment: Musicals & Theatres","Entertainment: Television","Entertainment: Video Games","Entertainment: Board Games","Science & Nature","Science: Computers","Science: Mathematics","Mythology","Sports","Geography","History","Politics","Art","Celebrities","Animals","Vehicles","Entertainment: Comics","Science: Gadgets","Entertainment: Japanese Anime & Manga","Entertaiment: Cartoon & Animations"],$=(n(56),function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(z.a)({},n,r))},a.saveConfig=function(){var e=a.state,t=e.questionsRange,n=e.categoryChosen,r=e.difficultyOption,c=e.typeOption;(0,a.props.dispatchSaveConfig)({amount:t,category:"Any"!==n?Y.indexOf(n)+8:"",difficulty:"Any"!==r?r.toLocaleLowerCase():"",type:"Any"!==c?"Multiple Choice"===c?"multiple":"boolean":""})},a.resetConfig=function(){a.setState({questionsRange:"5",categoryChosen:"Any",difficultyOption:"Any",typeOption:"Any"})},a.state={questionsRange:"5",categoryChosen:"Any",difficultyOption:"Any",typeOption:"Any"},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.questionsRange,n=e.categoryChosen,a=e.difficultyOption,c=e.typeOption;return r.a.createElement("form",null,r.a.createElement("fieldset",{className:"config-container"},r.a.createElement("legend",{"data-testid":"settings-title"},r.a.createElement("h2",null,"Configurations")),r.a.createElement("div",{className:"inner-container"},r.a.createElement("label",{htmlFor:"questions-range"}," ",r.a.createElement("h3",null,"Number of questions: ".concat(t||"5")),r.a.createElement("input",{name:"questionsRange",type:"range",list:"range-options",value:t,min:"5",max:"50",step:"5",onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"categories"},r.a.createElement("h3",null,"Categories"),r.a.createElement("select",{id:"categories",name:"categoryChosen",value:n,onChange:this.handleChange},Y.map((function(e,t){return r.a.createElement("option",{key:t,name:"categoryChosen",value:e},e)})))),r.a.createElement("label",{htmlFor:"difficulty"},r.a.createElement("h3",null,"Difficulty"),r.a.createElement("select",{id:"difficulty",name:"difficultyOption",value:a,onChange:this.handleChange},["Any","Easy","Medium","Hard"].map((function(e,t){return r.a.createElement("option",{key:t,name:"difficultyOption",value:e},e)})))),r.a.createElement("label",{htmlFor:"type"},r.a.createElement("h3",null,"Type of Question"),r.a.createElement("select",{id:"type",name:"typeOption",value:c,onChange:this.handleChange},["Any","Multiple Choice","True/False"].map((function(e,t){return r.a.createElement("option",{key:t,name:"typeOption",value:e},e)})))))),r.a.createElement("div",{className:"btn-container"},r.a.createElement("button",{className:"config-btn",type:"button",onClick:this.saveConfig},"Save"),r.a.createElement("button",{className:"config-btn",type:"button",onClick:this.resetConfig},"Default configuration")))}}]),n}(a.Component)),ee=Object(o.b)(null,(function(e){return{dispatchSaveConfig:function(t){return e(function(e){return{type:"SAVE_CONFIG",config:e}}(t))}}}))($),te=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).validate=function(){var e=a.state,t=e.email,n=e.name,r=/\S+@\S+\.\S+/.test(t);return n&&r?a.setState({isDisabled:!1}):a.setState({isDisabled:!0})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(z.a)({},n,r),a.validate)},a.handleClick=function(){var e=a.state,t=e.name,n=e.email;(0,a.props.saveUserData)(t,n)},a.state={email:"",isDisabled:!0,name:"",openConfig:!1},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.dispatchRequestToken)()}},{key:"render",value:function(){var e=this,t=this.state,n=t.email,a=t.isDisabled,c=t.name,i=t.openConfig;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:X.a,className:"App-logo",alt:"logo"}),r.a.createElement("p",null,"SUA VEZ"))),r.a.createElement("div",{className:"App"},r.a.createElement("input",{className:"input-form","data-testid":"input-player-name",id:"name",name:"name",placeholder:"nome",onChange:this.handleChange,type:"text",value:c}),r.a.createElement("input",{className:"input-form","data-testid":"input-gravatar-email",id:"email",name:"email",placeholder:"email",onChange:this.handleChange,type:"email",value:n}),r.a.createElement(s.b,{to:"/game"},r.a.createElement("button",{className:"btn","data-testid":"btn-play",disabled:a,onClick:this.handleClick,type:"button"},"Play")),r.a.createElement("button",{className:"btn","data-testid":"btn-settings",onClick:function(){return e.setState({openConfig:!i})},type:"button"},"Configura\xe7\xe3o"))),r.a.createElement("div",null,i&&r.a.createElement(ee,null)))}}]),n}(r.a.Component),ne=Object(o.b)(null,(function(e){return{dispatchRequestToken:function(t){return e(function(){var e=Object(h.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"REQUEST_TOKEN"}),e.prev=1,e.next=4,b("https://opentdb.com/api_token.php?command=request");case 4:n=e.sent,t({type:"RECEIVE_TOKEN_SUCCESS",token:n.token}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:"RECEIVE_TOKEN_FAILURE",error:void 0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())},saveUserData:function(t,n){return e(function(e,t){return{type:"USER_LOGIN_DATA",email:t,name:e}}(t,n))}}}))(te),ae=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:"/",component:ne}),r.a.createElement(d.a,{path:"/game",component:Z}),r.a.createElement(d.a,{path:"/feedback",component:L}),r.a.createElement(d.a,{path:"/ranking",component:D}))}}]),n}(a.Component);n(57);i.a.render(r.a.createElement(s.a,null,r.a.createElement(o.a,{store:_},r.a.createElement(ae,null))),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.1a64f340.chunk.js.map